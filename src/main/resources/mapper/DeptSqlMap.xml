<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.great.talent.mapper.DeptMapper">

    <select id="userLogin" resultType="User" parameterType="User">
		select * from tbl_user where UACCOUNT = #{uaccount} and UPASSWORD = #{upassword}
	</select>

    <!--    用户注册前账号检查-->
    <select id="userNameCheck" resultType="java.lang.Integer" parameterType="java.lang.String">
        select count(*) as num from tbl_user where uaccount = #{uaccount}
    </select>

    <insert id="addUser"  parameterType="User">
		insert into tbl_user (uaccount,upassword,uname,usex,uage,utel,ustate,uaddress,udate) values (#{uaccount},#{upassword},#{uname},#{usex},#{uage},#{utel},#{ustate},#{uaddress},#{udate})
	</insert>

    <!--    密码找回-根据账号查手机号-->
    <select id="findPhoneByAccount" resultType="java.lang.String" parameterType="java.lang.String">
        select utel from tbl_user where uaccount = #{uaccount}
    </select>
    <!--    密码找回-修改新密码-->
    <update id="updateUser" parameterType="User">
		update tbl_user set upassword=#{upassword} where uaccount=#{uaccount}
	</update>
    <!--    个人中心-修改个人信息-->
    <update id="updatePersonal" parameterType="User">
		update tbl_user set uname=#{uname},usex=#{usex},uage=#{uage},uaddress=#{uaddress} where uaccount=#{uaccount}
	</update>
    <!--    个人中心-修改手机号-->
    <update id="updatePhone" parameterType="User">
		update tbl_user set utel=#{utel} where uaccount=#{uaccount}
	</update>
    <!--    个人中心-上传头像-->
    <update id="uheadUpLoad" parameterType="User">
		update tbl_user set uhead=#{uhead} where uaccount=#{uaccount}
	</update>
</mapper>